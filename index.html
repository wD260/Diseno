<style>
    .button-container {
        position: absolute;
        top: 20px;
        right: 20px;
        z-index: 1000;
    }

    .btn {
        padding: 10px 15px;
        font-size: 14px;
        border: none;
        border-radius: 5px;
        background-color: #007bff;
        color: white;
        cursor: pointer;
    }

    .btn:hover {
        background-color: #0056b3;
    }
</style>

<script>
    let map = L.map("map").setView([11.021, -74.8678], 13); // Zoom inicial cambiado a 13
    let marker = null;
    let route = [];
    let polyline = L.polyline(route, { color: 'blue', weight: 4 }).addTo(map);
    let lastPosition = null;

    L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
        attribution: "&copy; OpenStreetMap contributors"
    }).addTo(map);

    function actualizarDatos() {
        fetch("datos.php")
        .then(response => response.json())
        .then(data => {
            let nuevaLatLng = [data.lat, data.lon];

            document.getElementById("lat").innerText = data.lat;
            document.getElementById("lon").innerText = data.lon;
            document.getElementById("fecha").innerText = data.fecha;
            document.getElementById("hora").innerText = data.hora;

            if (!marker) {
                marker = L.circleMarker(nuevaLatLng, {
                    radius: 8, // Ajuste del tamaÃ±o del marcador
                    fillColor: "#007bff",
                    color: "#0056b3",
                    weight: 2,
                    opacity: 1,
                    fillOpacity: 0.8
                }).addTo(map);
            } else {
                marker.setLatLng(nuevaLatLng);
            }

            route.push(nuevaLatLng);
            polyline.setLatLngs(route);
            lastPosition = nuevaLatLng;
        })
        .catch(error => console.error("Error al obtener los datos:", error));
    }

    function centrarMapa() {
        if (lastPosition) {
            map.setView(lastPosition, 14); // Zoom ajustado al centrar
        }
    }

    setInterval(actualizarDatos, 2000);
    window.onload = actualizarDatos;
</script>
